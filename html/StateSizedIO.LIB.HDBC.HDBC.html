<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>StateSizedIO.LIB.HDBC.HDBC</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="StateSizedIO.LIB.HDBC.HDBC.html" class="Module">StateSizedIO.LIB.HDBC.HDBC</a> <a id="35" class="Keyword">where</a>

<a id="42" class="Keyword">open</a> <a id="47" class="Keyword">import</a> <a id="54" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a>
<a id="69" class="Keyword">open</a> <a id="74" class="Keyword">import</a> <a id="81" href="Data.Integer.html" class="Module">Data.Integer</a>
<a id="94" class="Keyword">open</a> <a id="99" class="Keyword">import</a> <a id="106" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="120" class="Keyword">hiding</a> <a id="127" class="Symbol">(</a><a id="128" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">_+_</a><a id="131" class="Symbol">)</a>
<a id="133" class="Keyword">open</a> <a id="138" class="Keyword">import</a> <a id="145" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="162" class="Keyword">renaming</a> <a id="171" class="Symbol">(</a><a id="172" href="Data.String.Base.html#1101" class="Function Operator">_++_</a> <a id="177" class="Symbol">to</a> <a id="180" href="Data.String.Base.html#1101" class="Function Operator">_++Str_</a><a id="187" class="Symbol">)</a>

<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Data.Product.html" class="Module">Data.Product</a> <a id="215" class="Keyword">renaming</a> <a id="224" class="Symbol">(</a><a id="225" href="Data.Product.html#2128" class="Function">map</a> <a id="229" class="Symbol">to</a> <a id="232" href="Data.Product.html#2128" class="Function">mapProduct</a><a id="242" class="Symbol">)</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Data.Integer.html" class="Module">Data.Integer</a>
<a id="269" class="Keyword">open</a> <a id="274" class="Keyword">import</a> <a id="281" href="Data.List.html" class="Module">Data.List</a>

<a id="292" class="Keyword">open</a> <a id="297" class="Keyword">import</a> <a id="304" href="Function.html" class="Module">Function</a>

<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="StateSizedIO.LIB.library.html" class="Module">StateSizedIO.LIB.library</a>

<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="NativeIO.html" class="Module">NativeIO</a> <a id="373" class="Keyword">renaming</a> <a id="382" class="Symbol">(</a><a id="383" href="NativeIO.html#260" class="Postulate">NativeIO</a> <a id="392" class="Symbol">to</a> <a id="395" href="NativeIO.html#260" class="Postulate">IO</a><a id="397" class="Symbol">;</a> <a id="399" href="NativeIO.html#287" class="Postulate">nativeReturn</a> <a id="412" class="Symbol">to</a> <a id="415" href="NativeIO.html#287" class="Postulate">return</a><a id="421" class="Symbol">;</a> <a id="423" href="NativeIO.html#331" class="Postulate Operator">_native&gt;&gt;=_</a> <a id="435" class="Symbol">to</a> <a id="438" href="NativeIO.html#331" class="Postulate Operator">_&gt;&gt;=_</a><a id="443" class="Symbol">)</a>


<a id="447" class="Comment">--</a>
<a id="450" class="Comment">-- TODO: implement lazy row retrevial as Toni suggested</a>
<a id="506" class="Comment">-- (Return a type for the lazy list and operations to get the next row)</a>
<a id="578" class="Comment">--</a>
<a id="581" class="Comment">--</a>

<a id="585" class="Comment">--</a>
<a id="588" class="Comment">-- TODO: once we use only our IO (not NativeIO)</a>
<a id="636" class="Comment">--       we must use consistently &quot;naitveFunctionName&quot; here (i.e., it is mixed/sometimes omitted)</a>
<a id="734" class="Comment">--</a>

<a id="738" class="Symbol">{-#</a> <a id="742" class="Keyword">FOREIGN</a> GHC import qualified Database.HDBC.Sqlite3 <a id="793" class="Symbol">#-}</a>
<a id="797" class="Symbol">{-#</a> <a id="801" class="Keyword">FOREIGN</a> GHC import qualified Database.HDBC <a id="844" class="Symbol">#-}</a>
<a id="848" class="Symbol">{-#</a> <a id="852" class="Keyword">FOREIGN</a> GHC import qualified Control.Monad <a id="895" class="Symbol">#-}</a>
<a id="899" class="Symbol">{-#</a> <a id="903" class="Keyword">FOREIGN</a> GHC import qualified Database.HDBC.SqlValue <a id="955" class="Symbol">#-}</a>


<a id="961" class="Symbol">{-#</a> <a id="965" class="Keyword">FOREIGN</a> GHC import qualified Data.ByteString <a id="1010" class="Symbol">#-}</a>
<a id="1014" class="Symbol">{-#</a> <a id="1018" class="Keyword">FOREIGN</a> GHC import qualified Data.Int <a id="1056" class="Symbol">#-}</a>
<a id="1060" class="Symbol">{-#</a> <a id="1064" class="Keyword">FOREIGN</a> GHC import qualified Data.ByteString.Char8 <a id="1115" class="Symbol">#-}</a>
<a id="1119" class="Symbol">{-#</a> <a id="1123" class="Keyword">FOREIGN</a> GHC import qualified Data.Text <a id="1162" class="Symbol">#-}</a>


<a id="1168" class="Comment">-- check later if we need safer conversion functions</a>
<a id="1221" class="Comment">--</a>

<a id="1225" class="Symbol">{-#</a> <a id="1229" class="Keyword">FOREIGN</a> GHC
  data SqlValueShort = SqlStringShort Data.Text.Text
                     | SqlIntShort Integer
                     | SqlNullShort
                     | SqlUndefinedShort


  toSqlValueShort :: Database.HDBC.SqlValue -&gt; SqlValueShort
  toSqlValueShort (Database.HDBC.SqlByteString s) = SqlStringShort $ Data.Text.pack $ Data.ByteString.Char8.unpack  s
  toSqlValueShort (Database.HDBC.SqlInt64 x) = SqlIntShort $ fromIntegral x
  toSqlValueShort Database.HDBC.SqlNull = SqlNullShort
  toSqlValueShort _ = SqlUndefinedShort

  <a id="1769" class="Option">--</a> throws an exception (Non-exhaustive patterns) for the value SqlUndefinedShort!
  <a id="1853" class="Option">--</a>
  toSqlValue :: SqlValueShort -&gt; Database.HDBC.SqlValue
  toSqlValue (SqlStringShort str) =  Database.HDBC.SqlValue.SqlString (Data.Text.unpack str)
  toSqlValue (SqlIntShort x) =  Database.HDBC.SqlValue.SqlInt64 (fromIntegral x)
  toSqlValue SqlNullShort = Database.HDBC.SqlValue.SqlNull
  toSqlValue SqlUndefinedShort = error &quot;ERROR!!! toSqlValue function with SqlUndefinedShort, can&#39;t convert it.&quot;

<a id="2258" class="Symbol">#-}</a>

<a id="2263" class="Keyword">data</a> <a id="SqlVal"></a><a id="2268" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="2275" class="Symbol">:</a> <a id="2277" class="PrimitiveType">Set</a> <a id="2281" class="Keyword">where</a>
  <a id="SqlVal.sqlString"></a><a id="2289" href="StateSizedIO.LIB.HDBC.HDBC.html#2289" class="InductiveConstructor">sqlString</a>    <a id="2302" class="Symbol">:</a> <a id="2304" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="2311" class="Symbol">→</a> <a id="2313" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>
  <a id="SqlVal.sqlInteger"></a><a id="2322" href="StateSizedIO.LIB.HDBC.HDBC.html#2322" class="InductiveConstructor">sqlInteger</a>   <a id="2335" class="Symbol">:</a> <a id="2337" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a> <a id="2339" class="Symbol">→</a> <a id="2341" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>
  <a id="SqlVal.sqlNull"></a><a id="2350" href="StateSizedIO.LIB.HDBC.HDBC.html#2350" class="InductiveConstructor">sqlNull</a>      <a id="2363" class="Symbol">:</a> <a id="2365" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>
  <a id="SqlVal.sqlUndefined"></a><a id="2374" href="StateSizedIO.LIB.HDBC.HDBC.html#2374" class="InductiveConstructor">sqlUndefined</a> <a id="2387" class="Symbol">:</a> <a id="2389" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>

<a id="2397" class="Symbol">{-#</a> <a id="2401" class="Keyword">COMPILE</a> GHC <a id="2413" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> = data SqlValueShort (SqlStringShort | SqlIntShort | SqlNullShort | SqlUndefinedShort) <a id="2507" class="Symbol">#-}</a>


<a id="2513" class="Keyword">postulate</a> <a id="SqlValue"></a><a id="2523" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> <a id="2532" class="Symbol">:</a> <a id="2534" class="PrimitiveType">Set</a>
<a id="2538" class="Symbol">{-#</a> <a id="2542" class="Keyword">COMPILE</a> GHC <a id="2554" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> = type Database.HDBC.SqlValue.SqlValue <a id="2602" class="Symbol">#-}</a>

<a id="2607" class="Keyword">postulate</a> <a id="toSqlVal"></a><a id="2617" href="StateSizedIO.LIB.HDBC.HDBC.html#2617" class="Postulate">toSqlVal</a> <a id="2626" class="Symbol">:</a> <a id="2628" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> <a id="2637" class="Symbol">→</a> <a id="2639" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>
<a id="2646" class="Symbol">{-#</a> <a id="2650" class="Keyword">COMPILE</a> GHC <a id="2662" href="StateSizedIO.LIB.HDBC.HDBC.html#2617" class="Postulate">toSqlVal</a> = toSqlValueShort <a id="2689" class="Symbol">#-}</a>

<a id="2694" class="Keyword">postulate</a>  <a id="toSqlValue"></a><a id="2705" href="StateSizedIO.LIB.HDBC.HDBC.html#2705" class="Postulate">toSqlValue</a> <a id="2716" class="Symbol">:</a> <a id="2718" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="2725" class="Symbol">→</a> <a id="2727" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a>
<a id="2736" class="Symbol">{-#</a> <a id="2740" class="Keyword">COMPILE</a> GHC <a id="2752" href="StateSizedIO.LIB.HDBC.HDBC.html#2705" class="Postulate">toSqlValue</a> = toSqlValue <a id="2776" class="Symbol">#-}</a>

<a id="toStringSqlVal"></a><a id="2781" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="2796" class="Symbol">:</a> <a id="2798" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="2805" class="Symbol">→</a> <a id="2807" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="2814" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="2829" class="Symbol">(</a><a id="2830" href="StateSizedIO.LIB.HDBC.HDBC.html#2289" class="InductiveConstructor">sqlString</a> <a id="2840" href="StateSizedIO.LIB.HDBC.HDBC.html#2840" class="Bound">s</a><a id="2841" class="Symbol">)</a>   <a id="2845" class="Symbol">=</a> <a id="2847" href="StateSizedIO.LIB.HDBC.HDBC.html#2840" class="Bound">s</a>
<a id="2849" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="2864" class="Symbol">(</a><a id="2865" href="StateSizedIO.LIB.HDBC.HDBC.html#2322" class="InductiveConstructor">sqlInteger</a> <a id="2876" href="StateSizedIO.LIB.HDBC.HDBC.html#2876" class="Bound">x</a><a id="2877" class="Symbol">)</a>  <a id="2880" class="Symbol">=</a> <a id="2882" href="Data.Integer.html#941" class="Function">Data.Integer.show</a> <a id="2900" href="StateSizedIO.LIB.HDBC.HDBC.html#2876" class="Bound">x</a>
<a id="2902" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="2917" href="StateSizedIO.LIB.HDBC.HDBC.html#2350" class="InductiveConstructor">sqlNull</a>         <a id="2933" class="Symbol">=</a> <a id="2935" class="String">&quot;SqlValNull&quot;</a>
<a id="2948" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="2963" href="StateSizedIO.LIB.HDBC.HDBC.html#2374" class="InductiveConstructor">sqlUndefined</a>    <a id="2979" class="Symbol">=</a> <a id="2981" class="String">&quot;SqlValUndefined&quot;</a>

<a id="toTypeNameSqlVal"></a><a id="3000" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="3017" class="Symbol">:</a> <a id="3019" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="3026" class="Symbol">→</a> <a id="3028" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="3035" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="3052" class="Symbol">(</a><a id="3053" href="StateSizedIO.LIB.HDBC.HDBC.html#2289" class="InductiveConstructor">sqlString</a> <a id="3063" class="Symbol">_)</a>   <a id="3068" class="Symbol">=</a> <a id="3070" class="String">&quot;[String]&quot;</a>
<a id="3081" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="3098" class="Symbol">(</a><a id="3099" href="StateSizedIO.LIB.HDBC.HDBC.html#2322" class="InductiveConstructor">sqlInteger</a> <a id="3110" class="Symbol">_)</a>  <a id="3114" class="Symbol">=</a> <a id="3116" class="String">&quot;[Integer]&quot;</a>
<a id="3128" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="3145" href="StateSizedIO.LIB.HDBC.HDBC.html#2350" class="InductiveConstructor">sqlNull</a>         <a id="3161" class="Symbol">=</a> <a id="3163" class="String">&quot;SqlValNull&quot;</a>
<a id="3176" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="3193" href="StateSizedIO.LIB.HDBC.HDBC.html#2374" class="InductiveConstructor">sqlUndefined</a>    <a id="3209" class="Symbol">=</a> <a id="3211" class="String">&quot;SqlValUndefined&quot;</a>


<a id="toStringListSqlVal"></a><a id="3231" href="StateSizedIO.LIB.HDBC.HDBC.html#3231" class="Function">toStringListSqlVal</a> <a id="3250" class="Symbol">:</a> <a id="3252" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="3257" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="3264" class="Symbol">→</a> <a id="3266" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="3273" href="StateSizedIO.LIB.HDBC.HDBC.html#3231" class="Function">toStringListSqlVal</a> <a id="3292" class="Symbol">(</a><a id="3293" href="StateSizedIO.LIB.HDBC.HDBC.html#3293" class="Bound">x</a> <a id="3295" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="3297" href="StateSizedIO.LIB.HDBC.HDBC.html#3297" class="Bound">xs</a><a id="3299" class="Symbol">)</a> <a id="3301" class="Symbol">=</a> <a id="3303" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="3318" href="StateSizedIO.LIB.HDBC.HDBC.html#3293" class="Bound">x</a> <a id="3320" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="3326" class="String">&quot;\n&quot;</a> <a id="3331" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="3337" href="StateSizedIO.LIB.HDBC.HDBC.html#3231" class="Function">toStringListSqlVal</a> <a id="3356" href="StateSizedIO.LIB.HDBC.HDBC.html#3297" class="Bound">xs</a>
<a id="3359" href="StateSizedIO.LIB.HDBC.HDBC.html#3231" class="Function">toStringListSqlVal</a> <a id="3378" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="3381" class="Symbol">=</a> <a id="3383" class="String">&quot;&quot;</a>



<a id="3389" class="Comment">-- Types</a>
<a id="3398" class="Comment">--</a>
<a id="3401" class="Keyword">postulate</a> <a id="Connection"></a><a id="3411" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="3422" class="Symbol">:</a> <a id="3424" class="PrimitiveType">Set</a>
<a id="3428" class="Symbol">{-#</a> <a id="3432" class="Keyword">COMPILE</a> GHC <a id="3444" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> = type Database.HDBC.Sqlite3.Connection <a id="3495" class="Symbol">#-}</a>


<a id="3501" class="Keyword">postulate</a> <a id="Statement"></a><a id="3511" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> <a id="3521" class="Symbol">:</a> <a id="3523" class="PrimitiveType">Set</a>
<a id="3527" class="Symbol">{-#</a> <a id="3531" class="Keyword">COMPILE</a> GHC <a id="3543" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> = type Database.HDBC.Statement <a id="3584" class="Symbol">#-}</a>

<a id="3589" class="Keyword">postulate</a> <a id="PairStringSqlValue"></a><a id="3599" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a> <a id="3618" class="Symbol">:</a> <a id="3620" class="PrimitiveType">Set</a>
<a id="3624" class="Symbol">{-#</a> <a id="3628" class="Keyword">COMPILE</a> GHC <a id="3640" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a> = type (String, Database.HDBC.SqlValue.SqlValue) <a id="3708" class="Symbol">#-}</a>


<a id="3714" class="Comment">-- trivial helpers</a>
<a id="3733" class="Comment">--</a>
<a id="3736" class="Keyword">postulate</a> <a id="fstString"></a><a id="3746" href="StateSizedIO.LIB.HDBC.HDBC.html#3746" class="Postulate">fstString</a> <a id="3756" class="Symbol">:</a> <a id="3758" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a> <a id="3777" class="Symbol">→</a> <a id="3779" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="3786" class="Symbol">{-#</a> <a id="3790" class="Keyword">COMPILE</a> GHC <a id="3802" href="StateSizedIO.LIB.HDBC.HDBC.html#3746" class="Postulate">fstString</a> = (\(a , b) -&gt; Data.Text.pack a) <a id="3845" class="Symbol">#-}</a>

<a id="3850" class="Keyword">postulate</a> <a id="sndSqlValue"></a><a id="3860" href="StateSizedIO.LIB.HDBC.HDBC.html#3860" class="Postulate">sndSqlValue</a> <a id="3872" class="Symbol">:</a> <a id="3874" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a> <a id="3893" class="Symbol">→</a> <a id="3895" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a>
<a id="3904" class="Symbol">{-#</a> <a id="3908" class="Keyword">COMPILE</a> GHC <a id="3920" href="StateSizedIO.LIB.HDBC.HDBC.html#3860" class="Postulate">sndSqlValue</a> = (\(a , b) -&gt; b) <a id="3950" class="Symbol">#-}</a>

<a id="convertPair"></a><a id="3955" href="StateSizedIO.LIB.HDBC.HDBC.html#3955" class="Function">convertPair</a> <a id="3967" class="Symbol">:</a> <a id="3969" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a> <a id="3988" class="Symbol">→</a> <a id="3990" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="3997" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="3999" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a>
<a id="4008" href="StateSizedIO.LIB.HDBC.HDBC.html#3955" class="Function">convertPair</a> <a id="4020" href="StateSizedIO.LIB.HDBC.HDBC.html#4020" class="Bound">x</a> <a id="4022" class="Symbol">=</a> <a id="4024" href="StateSizedIO.LIB.HDBC.HDBC.html#3746" class="Postulate">fstString</a> <a id="4034" href="StateSizedIO.LIB.HDBC.HDBC.html#4020" class="Bound">x</a> <a id="4036" href="Data.Product.html#543" class="InductiveConstructor Operator">,</a> <a id="4038" href="StateSizedIO.LIB.HDBC.HDBC.html#3860" class="Postulate">sndSqlValue</a> <a id="4050" href="StateSizedIO.LIB.HDBC.HDBC.html#4020" class="Bound">x</a>

<a id="4053" class="Comment">-- connect to Sqlite database</a>
<a id="4083" class="Comment">--</a>
<a id="4086" class="Keyword">postulate</a> <a id="nativeConnectDB"></a><a id="4096" href="StateSizedIO.LIB.HDBC.HDBC.html#4096" class="Postulate">nativeConnectDB</a> <a id="4112" class="Symbol">:</a> <a id="4114" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="4121" class="Symbol">→</a> <a id="4123" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4126" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a>
<a id="4137" class="Symbol">{-#</a> <a id="4141" class="Keyword">COMPILE</a> GHC <a id="4153" href="StateSizedIO.LIB.HDBC.HDBC.html#4096" class="Postulate">nativeConnectDB</a> = (\tableName -&gt; Database.HDBC.Sqlite3.connectSqlite3 (Data.Text.unpack tableName)) <a id="4253" class="Symbol">#-}</a>


<a id="4259" class="Comment">--</a>
<a id="4262" class="Comment">-- HDBC interface</a>
<a id="4280" class="Comment">--</a>

<a id="4284" class="Keyword">postulate</a> <a id="nativeDisconnect"></a><a id="4294" href="StateSizedIO.LIB.HDBC.HDBC.html#4294" class="Postulate">nativeDisconnect</a> <a id="4311" class="Symbol">:</a> <a id="4313" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="4324" class="Symbol">→</a> <a id="4326" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4329" href="Unit.html#28" class="Record">Unit</a>
<a id="4334" class="Symbol">{-#</a> <a id="4338" class="Keyword">COMPILE</a> GHC <a id="4350" href="StateSizedIO.LIB.HDBC.HDBC.html#4294" class="Postulate">nativeDisconnect</a> = Database.HDBC.disconnect <a id="4394" class="Symbol">#-}</a>

<a id="4399" class="Keyword">postulate</a> <a id="nativeCommit"></a><a id="4409" href="StateSizedIO.LIB.HDBC.HDBC.html#4409" class="Postulate">nativeCommit</a> <a id="4422" class="Symbol">:</a> <a id="4424" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="4435" class="Symbol">→</a> <a id="4437" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4440" href="Unit.html#28" class="Record">Unit</a>
<a id="4445" class="Symbol">{-#</a> <a id="4449" class="Keyword">COMPILE</a> GHC <a id="4461" href="StateSizedIO.LIB.HDBC.HDBC.html#4409" class="Postulate">nativeCommit</a> = Database.HDBC.commit <a id="4497" class="Symbol">#-}</a>

<a id="4502" class="Keyword">postulate</a> <a id="nativeRollback"></a><a id="4512" href="StateSizedIO.LIB.HDBC.HDBC.html#4512" class="Postulate">nativeRollback</a> <a id="4527" class="Symbol">:</a> <a id="4529" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="4540" class="Symbol">→</a> <a id="4542" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4545" href="Unit.html#28" class="Record">Unit</a>
<a id="4550" class="Symbol">{-#</a> <a id="4554" class="Keyword">COMPILE</a> GHC <a id="4566" href="StateSizedIO.LIB.HDBC.HDBC.html#4512" class="Postulate">nativeRollback</a> = Database.HDBC.rollback <a id="4606" class="Symbol">#-}</a>


<a id="4612" class="Comment">-- returns the number of modified rows</a>
<a id="4651" class="Comment">--</a>
<a id="4654" class="Keyword">postulate</a> <a id="nativeRunSqlValue"></a><a id="4664" href="StateSizedIO.LIB.HDBC.HDBC.html#4664" class="Postulate">nativeRunSqlValue</a> <a id="4682" class="Symbol">:</a> <a id="4684" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="4695" class="Symbol">→</a> <a id="4697" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="4704" class="Symbol">→</a> <a id="4706" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="4711" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> <a id="4720" class="Symbol">→</a> <a id="4722" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4725" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="4727" class="Symbol">{-#</a> <a id="4731" class="Keyword">COMPILE</a> GHC <a id="4743" href="StateSizedIO.LIB.HDBC.HDBC.html#4664" class="Postulate">nativeRunSqlValue</a> = (\conn str values -&gt; Database.HDBC.run conn (Data.Text.unpack str) values) <a id="4838" class="Symbol">#-}</a>

<a id="nativeRunSqlValueAgda"></a><a id="4843" href="StateSizedIO.LIB.HDBC.HDBC.html#4843" class="Function">nativeRunSqlValueAgda</a> <a id="4865" class="Symbol">:</a> <a id="4867" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="4878" class="Symbol">→</a> <a id="4880" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="4887" class="Symbol">→</a> <a id="4889" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="4894" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="4901" class="Symbol">→</a> <a id="4903" href="NativeIO.html#260" class="Postulate">IO</a> <a id="4906" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="4908" href="StateSizedIO.LIB.HDBC.HDBC.html#4843" class="Function">nativeRunSqlValueAgda</a> <a id="4930" href="StateSizedIO.LIB.HDBC.HDBC.html#4930" class="Bound">conn</a> <a id="4935" href="StateSizedIO.LIB.HDBC.HDBC.html#4935" class="Bound">str</a> <a id="4939" href="StateSizedIO.LIB.HDBC.HDBC.html#4939" class="Bound">values</a> <a id="4946" class="Symbol">=</a> <a id="4948" href="StateSizedIO.LIB.HDBC.HDBC.html#4664" class="Postulate">nativeRunSqlValue</a> <a id="4966" href="StateSizedIO.LIB.HDBC.HDBC.html#4930" class="Bound">conn</a> <a id="4971" href="StateSizedIO.LIB.HDBC.HDBC.html#4935" class="Bound">str</a> <a id="4975" class="Symbol">(</a><a id="4976" href="Data.List.Base.html#1057" class="Function">map</a> <a id="4980" href="StateSizedIO.LIB.HDBC.HDBC.html#2705" class="Postulate">toSqlValue</a> <a id="4991" href="StateSizedIO.LIB.HDBC.HDBC.html#4939" class="Bound">values</a><a id="4997" class="Symbol">)</a>

<a id="5000" class="Keyword">postulate</a> <a id="nativePrepare"></a><a id="5010" href="StateSizedIO.LIB.HDBC.HDBC.html#5010" class="Postulate">nativePrepare</a> <a id="5024" class="Symbol">:</a> <a id="5026" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="5037" class="Symbol">→</a> <a id="5039" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="5046" class="Symbol">→</a> <a id="5048" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5051" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a>
<a id="5061" class="Symbol">{-#</a> <a id="5065" class="Keyword">COMPILE</a> GHC <a id="5077" href="StateSizedIO.LIB.HDBC.HDBC.html#5010" class="Postulate">nativePrepare</a> = (\conn str -&gt; Database.HDBC.prepare conn (Data.Text.unpack str)) <a id="5158" class="Symbol">#-}</a>



<a id="5165" class="Keyword">postulate</a> <a id="nativeExecuteSqlValue"></a><a id="5175" href="StateSizedIO.LIB.HDBC.HDBC.html#5175" class="Postulate">nativeExecuteSqlValue</a> <a id="5197" class="Symbol">:</a> <a id="5199" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> <a id="5209" class="Symbol">→</a> <a id="5211" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5216" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> <a id="5225" class="Symbol">→</a> <a id="5227" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5230" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="5232" class="Symbol">{-#</a> <a id="5236" class="Keyword">COMPILE</a> GHC <a id="5248" href="StateSizedIO.LIB.HDBC.HDBC.html#5175" class="Postulate">nativeExecuteSqlValue</a> = Database.HDBC.execute <a id="5294" class="Symbol">#-}</a>

<a id="nativeExecute"></a><a id="5299" href="StateSizedIO.LIB.HDBC.HDBC.html#5299" class="Function">nativeExecute</a> <a id="5313" class="Symbol">:</a> <a id="5315" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> <a id="5325" class="Symbol">→</a> <a id="5327" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5332" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="5339" class="Symbol">→</a> <a id="5341" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5344" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="5346" href="StateSizedIO.LIB.HDBC.HDBC.html#5299" class="Function">nativeExecute</a> <a id="5360" href="StateSizedIO.LIB.HDBC.HDBC.html#5360" class="Bound">statement</a> <a id="5370" href="StateSizedIO.LIB.HDBC.HDBC.html#5370" class="Bound">list</a> <a id="5375" class="Symbol">=</a> <a id="5377" href="StateSizedIO.LIB.HDBC.HDBC.html#5175" class="Postulate">nativeExecuteSqlValue</a> <a id="5399" href="StateSizedIO.LIB.HDBC.HDBC.html#5360" class="Bound">statement</a> <a id="5409" class="Symbol">(</a><a id="5410" href="Data.List.Base.html#1057" class="Function">map</a> <a id="5414" href="StateSizedIO.LIB.HDBC.HDBC.html#2705" class="Postulate">toSqlValue</a> <a id="5425" href="StateSizedIO.LIB.HDBC.HDBC.html#5370" class="Bound">list</a><a id="5429" class="Symbol">)</a>



<a id="5434" class="Keyword">postulate</a> <a id="runSqlValue"></a><a id="5444" href="StateSizedIO.LIB.HDBC.HDBC.html#5444" class="Postulate">runSqlValue</a> <a id="5456" class="Symbol">:</a> <a id="5458" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="5469" class="Symbol">→</a> <a id="5471" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="5478" class="Symbol">→</a> <a id="5480" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5485" href="StateSizedIO.LIB.HDBC.HDBC.html#2523" class="Postulate">SqlValue</a> <a id="5494" class="Symbol">→</a> <a id="5496" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5499" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="5501" class="Symbol">{-#</a> <a id="5505" class="Keyword">COMPILE</a> GHC <a id="5517" href="StateSizedIO.LIB.HDBC.HDBC.html#5444" class="Postulate">runSqlValue</a> = (\conn str list -&gt; Database.HDBC.run conn (Data.Text.unpack str) list) <a id="5602" class="Symbol">#-}</a>


<a id="nativeRun"></a><a id="5608" href="StateSizedIO.LIB.HDBC.HDBC.html#5608" class="Function">nativeRun</a> <a id="5618" class="Symbol">:</a> <a id="5620" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="5631" class="Symbol">→</a> <a id="5633" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="5640" class="Symbol">→</a> <a id="5642" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5647" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="5654" class="Symbol">→</a> <a id="5656" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5659" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>
<a id="5661" href="StateSizedIO.LIB.HDBC.HDBC.html#5608" class="Function">nativeRun</a> <a id="5671" href="StateSizedIO.LIB.HDBC.HDBC.html#5671" class="Bound">conn</a> <a id="5676" href="StateSizedIO.LIB.HDBC.HDBC.html#5676" class="Bound">str</a> <a id="5680" href="StateSizedIO.LIB.HDBC.HDBC.html#5680" class="Bound">list</a> <a id="5685" class="Symbol">=</a> <a id="5687" href="StateSizedIO.LIB.HDBC.HDBC.html#5444" class="Postulate">runSqlValue</a> <a id="5699" href="StateSizedIO.LIB.HDBC.HDBC.html#5671" class="Bound">conn</a> <a id="5704" href="StateSizedIO.LIB.HDBC.HDBC.html#5676" class="Bound">str</a> <a id="5708" class="Symbol">(</a><a id="5709" href="Data.List.Base.html#1057" class="Function">map</a> <a id="5713" href="StateSizedIO.LIB.HDBC.HDBC.html#2705" class="Postulate">toSqlValue</a> <a id="5724" href="StateSizedIO.LIB.HDBC.HDBC.html#5680" class="Bound">list</a><a id="5728" class="Symbol">)</a>


<a id="5732" class="Keyword">postulate</a> <a id="getTables"></a><a id="5742" href="StateSizedIO.LIB.HDBC.HDBC.html#5742" class="Postulate">getTables</a> <a id="5752" class="Symbol">:</a> <a id="5754" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="5765" class="Symbol">→</a> <a id="5767" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5770" class="Symbol">(</a><a id="5771" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5776" href="Agda.Builtin.String.html#165" class="Postulate">String</a><a id="5782" class="Symbol">)</a>
<a id="5784" class="Symbol">{-#</a> <a id="5788" class="Keyword">COMPILE</a> GHC <a id="5800" href="StateSizedIO.LIB.HDBC.HDBC.html#5742" class="Postulate">getTables</a> = (\conn -&gt; (Database.HDBC.getTables conn) &gt;&gt;= (\x -&gt; return $ map Data.Text.pack x) ) <a id="5897" class="Symbol">#-}</a>


<a id="5903" class="Keyword">postulate</a> <a id="fetchAllRowsALStrictSqlValue"></a><a id="5913" href="StateSizedIO.LIB.HDBC.HDBC.html#5913" class="Postulate">fetchAllRowsALStrictSqlValue</a> <a id="5942" class="Symbol">:</a> <a id="5944" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> <a id="5954" class="Symbol">→</a> <a id="5956" href="NativeIO.html#260" class="Postulate">IO</a> <a id="5959" class="Symbol">(</a><a id="5960" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5965" class="Symbol">(</a><a id="5966" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="5971" href="StateSizedIO.LIB.HDBC.HDBC.html#3599" class="Postulate">PairStringSqlValue</a><a id="5989" class="Symbol">))</a>
<a id="5992" class="Symbol">{-#</a> <a id="5996" class="Keyword">COMPILE</a> GHC <a id="6008" href="StateSizedIO.LIB.HDBC.HDBC.html#5913" class="Postulate">fetchAllRowsALStrictSqlValue</a> = (\statement -&gt; (Database.HDBC.fetchAllRowsAL&#39; statement)) <a id="6097" class="Symbol">#-}</a>

<a id="nativeFetchAllRowsAL&#39;"></a><a id="6102" href="StateSizedIO.LIB.HDBC.HDBC.html#6102" class="Function">nativeFetchAllRowsAL&#39;</a> <a id="6124" class="Symbol">:</a> <a id="6126" href="StateSizedIO.LIB.HDBC.HDBC.html#3511" class="Postulate">Statement</a> <a id="6136" class="Symbol">→</a> <a id="6138" href="NativeIO.html#260" class="Postulate">IO</a> <a id="6141" class="Symbol">(</a><a id="6142" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="6147" class="Symbol">(</a><a id="6148" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="6153" class="Symbol">(</a><a id="6154" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="6161" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="6163" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a><a id="6169" class="Symbol">)))</a>
<a id="6173" href="StateSizedIO.LIB.HDBC.HDBC.html#6102" class="Function">nativeFetchAllRowsAL&#39;</a> <a id="6195" href="StateSizedIO.LIB.HDBC.HDBC.html#6195" class="Bound">statement</a> <a id="6205" class="Symbol">=</a> <a id="6207" href="StateSizedIO.LIB.HDBC.HDBC.html#5913" class="Postulate">fetchAllRowsALStrictSqlValue</a> <a id="6236" href="StateSizedIO.LIB.HDBC.HDBC.html#6195" class="Bound">statement</a> <a id="6246" href="NativeIO.html#331" class="Postulate Operator">&gt;&gt;=</a> <a id="6250" class="Symbol">λ</a> <a id="6252" href="StateSizedIO.LIB.HDBC.HDBC.html#6252" class="Bound">list</a> <a id="6257" class="Symbol">→</a>
                            <a id="6287" href="NativeIO.html#287" class="Postulate">return</a> <a id="6294" class="Symbol">(</a><a id="6295" href="Data.List.Base.html#1057" class="Function">map</a> <a id="6299" class="Symbol">(</a><a id="6300" href="Data.List.Base.html#1057" class="Function">map</a> <a id="6304" class="Symbol">(λ</a> <a id="6307" href="StateSizedIO.LIB.HDBC.HDBC.html#6307" class="Bound">y</a> <a id="6309" class="Symbol">→</a> <a id="6311" href="Data.Product.html#2128" class="Function">mapProduct</a> <a id="6322" class="Symbol">(λ</a> <a id="6325" href="StateSizedIO.LIB.HDBC.HDBC.html#6325" class="Bound">x</a> <a id="6327" class="Symbol">→</a> <a id="6329" href="StateSizedIO.LIB.HDBC.HDBC.html#6325" class="Bound">x</a><a id="6330" class="Symbol">)</a> <a id="6332" href="StateSizedIO.LIB.HDBC.HDBC.html#2617" class="Postulate">toSqlVal</a> <a id="6341" class="Symbol">(</a><a id="6342" href="StateSizedIO.LIB.HDBC.HDBC.html#3955" class="Function">convertPair</a> <a id="6354" href="StateSizedIO.LIB.HDBC.HDBC.html#6307" class="Bound">y</a><a id="6355" class="Symbol">)))</a> <a id="6359" href="StateSizedIO.LIB.HDBC.HDBC.html#6252" class="Bound">list</a><a id="6363" class="Symbol">)</a>

<a id="nativePrintList"></a><a id="6366" href="StateSizedIO.LIB.HDBC.HDBC.html#6366" class="Function">nativePrintList</a> <a id="6382" class="Symbol">:</a> <a id="6384" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="6389" class="Symbol">(</a><a id="6390" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="6395" class="Symbol">(</a><a id="6396" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="6403" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="6405" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a><a id="6411" class="Symbol">))</a> <a id="6414" class="Symbol">→</a> <a id="6416" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="6423" href="StateSizedIO.LIB.HDBC.HDBC.html#6366" class="Function">nativePrintList</a> <a id="6439" href="StateSizedIO.LIB.HDBC.HDBC.html#6439" class="Bound">l</a> <a id="6441" class="Symbol">=</a> <a id="6443" href="Data.String.Base.html#1417" class="Function">unlines</a> <a id="6451" class="Symbol">(</a><a id="6452" href="Data.List.Base.html#1057" class="Function">map</a> <a id="6456" href="StateSizedIO.LIB.HDBC.HDBC.html#6492" class="Function">concat&#39;</a> <a id="6464" href="StateSizedIO.LIB.HDBC.HDBC.html#6704" class="Function">listListString</a><a id="6478" class="Symbol">)</a>
  <a id="6482" class="Keyword">where</a>
    <a id="6492" href="StateSizedIO.LIB.HDBC.HDBC.html#6492" class="Function">concat&#39;</a> <a id="6500" class="Symbol">=</a> <a id="6502" href="Data.List.Base.html#2376" class="Function">foldr</a> <a id="6508" class="Symbol">(λ</a> <a id="6511" href="StateSizedIO.LIB.HDBC.HDBC.html#6511" class="Bound">x</a> <a id="6513" href="StateSizedIO.LIB.HDBC.HDBC.html#6513" class="Bound">y</a> <a id="6515" class="Symbol">→</a> <a id="6517" href="StateSizedIO.LIB.HDBC.HDBC.html#6511" class="Bound">x</a> <a id="6519" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6525" class="String">&quot;, &quot;</a> <a id="6530" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6536" href="StateSizedIO.LIB.HDBC.HDBC.html#6513" class="Bound">y</a><a id="6537" class="Symbol">)</a> <a id="6539" class="String">&quot;&quot;</a>
    <a id="6546" href="StateSizedIO.LIB.HDBC.HDBC.html#6546" class="Function">toStr</a> <a id="6552" class="Symbol">:</a> <a id="6554" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="6561" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="6563" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a> <a id="6570" class="Symbol">→</a> <a id="6572" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
    <a id="6583" href="StateSizedIO.LIB.HDBC.HDBC.html#6546" class="Function">toStr</a> <a id="6589" class="Symbol">(</a><a id="6590" href="StateSizedIO.LIB.HDBC.HDBC.html#6590" class="Bound">str</a> <a id="6594" href="Data.Product.html#543" class="InductiveConstructor Operator">,</a> <a id="6596" href="StateSizedIO.LIB.HDBC.HDBC.html#6596" class="Bound">val</a><a id="6599" class="Symbol">)</a> <a id="6601" class="Symbol">=</a> <a id="6603" class="String">&quot;(&quot;</a> <a id="6607" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6613" href="StateSizedIO.LIB.HDBC.HDBC.html#6590" class="Bound">str</a> <a id="6617" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6623" class="String">&quot;, &quot;</a> <a id="6628" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6634" href="StateSizedIO.LIB.HDBC.HDBC.html#2781" class="Function">toStringSqlVal</a> <a id="6649" href="StateSizedIO.LIB.HDBC.HDBC.html#6596" class="Bound">val</a> <a id="6653" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6659" class="String">&quot; &quot;</a> <a id="6663" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6669" href="StateSizedIO.LIB.HDBC.HDBC.html#3000" class="Function">toTypeNameSqlVal</a> <a id="6686" href="StateSizedIO.LIB.HDBC.HDBC.html#6596" class="Bound">val</a> <a id="6690" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6696" class="String">&quot;)&quot;</a>
    <a id="6704" href="StateSizedIO.LIB.HDBC.HDBC.html#6704" class="Function">listListString</a> <a id="6719" class="Symbol">=</a> <a id="6721" href="Data.List.Base.html#1057" class="Function">map</a> <a id="6725" class="Symbol">(</a><a id="6726" href="Data.List.Base.html#1057" class="Function">map</a> <a id="6730" href="StateSizedIO.LIB.HDBC.HDBC.html#6546" class="Function">toStr</a><a id="6735" class="Symbol">)</a> <a id="6737" href="StateSizedIO.LIB.HDBC.HDBC.html#6439" class="Bound">l</a>



<a id="dropTableIfExisits"></a><a id="6742" href="StateSizedIO.LIB.HDBC.HDBC.html#6742" class="Function">dropTableIfExisits</a> <a id="6761" class="Symbol">:</a> <a id="6763" href="StateSizedIO.LIB.HDBC.HDBC.html#3411" class="Postulate">Connection</a> <a id="6774" class="Symbol">→</a> <a id="6776" class="Symbol">(</a><a id="6777" href="StateSizedIO.LIB.HDBC.HDBC.html#6777" class="Bound">tableName</a> <a id="6787" class="Symbol">:</a> <a id="6789" href="Agda.Builtin.String.html#165" class="Postulate">String</a><a id="6795" class="Symbol">)</a> <a id="6797" class="Symbol">→</a>  <a id="6800" href="NativeIO.html#260" class="Postulate">IO</a> <a id="6803" href="Unit.html#28" class="Record">Unit</a>
<a id="6808" href="StateSizedIO.LIB.HDBC.HDBC.html#6742" class="Function">dropTableIfExisits</a> <a id="6827" href="StateSizedIO.LIB.HDBC.HDBC.html#6827" class="Bound">conn</a> <a id="6832" href="StateSizedIO.LIB.HDBC.HDBC.html#6832" class="Bound">tableName</a> <a id="6842" class="Symbol">=</a> <a id="6844" href="StateSizedIO.LIB.HDBC.HDBC.html#5608" class="Function">nativeRun</a> <a id="6854" href="StateSizedIO.LIB.HDBC.HDBC.html#6827" class="Bound">conn</a> <a id="6859" class="Symbol">(</a><a id="6860" class="String">&quot;DROP TABLE IF EXISTS &quot;</a> <a id="6884" href="Data.String.Base.html#1101" class="Function Operator">++Str</a> <a id="6890" href="StateSizedIO.LIB.HDBC.HDBC.html#6832" class="Bound">tableName</a><a id="6899" class="Symbol">)</a> <a id="6901" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="6904" href="NativeIO.html#331" class="Postulate Operator">&gt;&gt;=</a> <a id="6908" class="Symbol">λ</a> <a id="6910" href="StateSizedIO.LIB.HDBC.HDBC.html#6910" class="Bound">_</a> <a id="6912" class="Symbol">→</a> <a id="6914" href="NativeIO.html#287" class="Postulate">return</a> <a id="6921" class="Symbol">_</a>
</pre></body></html>