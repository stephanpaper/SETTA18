<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>StateSizedIO.LIB.DB.Schema</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="StateSizedIO.LIB.DB.Schema.html" class="Module">StateSizedIO.LIB.DB.Schema</a> <a id="35" class="Keyword">where</a>

<a id="42" class="Keyword">open</a> <a id="47" class="Keyword">import</a> <a id="54" href="Data.Bool.html" class="Module">Data.Bool</a>
<a id="64" class="Keyword">open</a> <a id="69" class="Keyword">import</a> <a id="76" href="Data.String.html" class="Module">Data.String</a> <a id="88" class="Keyword">renaming</a> <a id="97" class="Symbol">(</a><a id="98" href="Data.String.Base.html#1101" class="Function Operator">_++_</a> <a id="103" class="Symbol">to</a> <a id="106" href="Data.String.Base.html#1101" class="Function Operator">_+++_</a><a id="111" class="Symbol">)</a> <a id="113" class="Keyword">hiding</a> <a id="120" class="Symbol">(</a><a id="121" href="Data.String.Base.html#1158" class="Function">length</a><a id="127" class="Symbol">)</a>
<a id="129" class="Keyword">open</a> <a id="134" class="Keyword">import</a> <a id="141" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="150" class="Keyword">open</a> <a id="155" class="Keyword">import</a> <a id="162" href="Data.List.html" class="Module">Data.List</a>
<a id="172" class="Keyword">open</a> <a id="177" class="Keyword">import</a> <a id="184" href="Data.Product.html" class="Module">Data.Product</a> <a id="197" class="Keyword">hiding</a> <a id="204" class="Symbol">(</a><a id="205" href="Data.Product.html#2128" class="Function">map</a><a id="208" class="Symbol">)</a>
<a id="210" class="Keyword">open</a> <a id="215" class="Keyword">import</a> <a id="222" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="231" class="Keyword">hiding</a> <a id="238" class="Symbol">(</a><a id="239" href="Data.Vec.html#1864" class="Function">map</a><a id="242" class="Symbol">)</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Data.Integer.html" class="Module">Data.Integer</a>
<a id="269" class="Keyword">open</a> <a id="274" class="Keyword">import</a> <a id="281" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="291" class="Keyword">open</a> <a id="296" class="Keyword">import</a> <a id="303" href="Data.Fin.html" class="Module">Data.Fin</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="StateSizedIO.LIB.HDBC.HDBC.html" class="Module">StateSizedIO.LIB.HDBC.HDBC</a>

<a id="353" class="Keyword">open</a> <a id="358" class="Keyword">import</a> <a id="365" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="392" class="Keyword">hiding</a> <a id="399" class="Symbol">(</a><a id="400" href="Relation.Nullary.Decidable.html#1632" class="Function">map</a><a id="403" class="Symbol">)</a>


<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="StateSizedIO.LIB.library.html" class="Module">StateSizedIO.LIB.library</a>



<a id="447" class="Comment">-- Type</a>
<a id="455" class="Comment">--</a>
<a id="458" class="Keyword">data</a> <a id="FieldType"></a><a id="463" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="473" class="Symbol">:</a> <a id="475" class="PrimitiveType">Set</a> <a id="479" class="Keyword">where</a>
  <a id="FieldType.string"></a><a id="487" href="StateSizedIO.LIB.DB.Schema.html#487" class="InductiveConstructor">string</a>  <a id="495" class="Symbol">:</a> <a id="497" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a>
  <a id="FieldType.integer"></a><a id="509" href="StateSizedIO.LIB.DB.Schema.html#509" class="InductiveConstructor">integer</a> <a id="517" class="Symbol">:</a> <a id="519" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a>


<a id="_==Type_"></a><a id="531" href="StateSizedIO.LIB.DB.Schema.html#531" class="Function Operator">_==Type_</a> <a id="540" class="Symbol">:</a> <a id="542" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="552" class="Symbol">→</a> <a id="554" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="564" class="Symbol">→</a> <a id="566" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="571" href="StateSizedIO.LIB.DB.Schema.html#487" class="InductiveConstructor">string</a> <a id="578" href="StateSizedIO.LIB.DB.Schema.html#531" class="Function Operator">==Type</a> <a id="585" href="StateSizedIO.LIB.DB.Schema.html#487" class="InductiveConstructor">string</a> <a id="592" class="Symbol">=</a> <a id="594" href="Agda.Builtin.Bool.html#92" class="InductiveConstructor">true</a>
<a id="599" href="StateSizedIO.LIB.DB.Schema.html#509" class="InductiveConstructor">integer</a> <a id="607" href="StateSizedIO.LIB.DB.Schema.html#531" class="Function Operator">==Type</a> <a id="614" href="StateSizedIO.LIB.DB.Schema.html#509" class="InductiveConstructor">integer</a> <a id="622" class="Symbol">=</a> <a id="624" href="Agda.Builtin.Bool.html#92" class="InductiveConstructor">true</a>
<a id="629" class="CatchallClause Symbol">_</a><a id="630" class="CatchallClause"> </a><a id="631" href="StateSizedIO.LIB.DB.Schema.html#531" class="CatchallClause Function Operator">==Type</a><a id="637" class="CatchallClause"> </a><a id="638" class="CatchallClause Symbol">_</a> <a id="640" class="Symbol">=</a> <a id="642" href="Agda.Builtin.Bool.html#86" class="InductiveConstructor">false</a>


<a id="650" class="Comment">-- Definition</a>
<a id="664" class="Comment">--</a>
<a id="TableName"></a><a id="667" href="StateSizedIO.LIB.DB.Schema.html#667" class="Function">TableName</a> <a id="677" class="Symbol">=</a> <a id="679" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="FieldName"></a><a id="686" href="StateSizedIO.LIB.DB.Schema.html#686" class="Function">FieldName</a> <a id="696" class="Symbol">=</a> <a id="698" href="Agda.Builtin.String.html#165" class="Postulate">String</a>

<a id="isNull"></a><a id="706" href="StateSizedIO.LIB.DB.Schema.html#706" class="Function">isNull</a> <a id="713" class="Symbol">=</a> <a id="715" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="isPrimaryKey"></a><a id="720" href="StateSizedIO.LIB.DB.Schema.html#720" class="Function">isPrimaryKey</a> <a id="733" class="Symbol">=</a> <a id="735" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>

<a id="Attribute"></a><a id="741" href="StateSizedIO.LIB.DB.Schema.html#741" class="Function">Attribute</a> <a id="751" class="Symbol">=</a> <a id="753" href="StateSizedIO.LIB.DB.Schema.html#686" class="Function">FieldName</a> <a id="763" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="765" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="775" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="777" href="StateSizedIO.LIB.DB.Schema.html#706" class="Function">isNull</a> <a id="784" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="786" href="StateSizedIO.LIB.DB.Schema.html#720" class="Function">isPrimaryKey</a>

<a id="TableType"></a><a id="800" href="StateSizedIO.LIB.DB.Schema.html#800" class="Function">TableType</a> <a id="810" class="Symbol">=</a> <a id="812" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="817" href="StateSizedIO.LIB.DB.Schema.html#741" class="Function">Attribute</a>
<a id="Schema"></a><a id="827" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a>    <a id="837" class="Symbol">=</a> <a id="839" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="844" class="Symbol">(</a><a id="845" href="StateSizedIO.LIB.DB.Schema.html#667" class="Function">TableName</a> <a id="855" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="857" href="StateSizedIO.LIB.DB.Schema.html#800" class="Function">TableType</a><a id="866" class="Symbol">)</a>




<a id="872" class="Comment">-- Access</a>
<a id="882" class="Comment">--</a>
<a id="nrTables"></a><a id="885" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="894" class="Symbol">:</a> <a id="896" class="Symbol">(</a><a id="897" href="StateSizedIO.LIB.DB.Schema.html#897" class="Bound">schema</a> <a id="904" class="Symbol">:</a> <a id="906" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="911" class="Symbol">(</a><a id="912" href="StateSizedIO.LIB.DB.Schema.html#667" class="Function">TableName</a> <a id="922" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="924" href="StateSizedIO.LIB.DB.Schema.html#800" class="Function">TableType</a><a id="933" class="Symbol">))</a> <a id="936" class="Symbol">→</a> <a id="938" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a>
<a id="940" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="949" class="Symbol">=</a> <a id="951" href="Data.List.Base.html#3242" class="Function">length</a>

<a id="nrColumns"></a><a id="959" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="969" class="Symbol">:</a> <a id="971" class="Symbol">(</a><a id="972" href="StateSizedIO.LIB.DB.Schema.html#972" class="Bound">schema</a> <a id="979" class="Symbol">:</a> <a id="981" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="986" class="Symbol">(</a><a id="987" href="StateSizedIO.LIB.DB.Schema.html#667" class="Function">TableName</a> <a id="997" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="999" href="StateSizedIO.LIB.DB.Schema.html#800" class="Function">TableType</a><a id="1008" class="Symbol">))</a>
            <a id="1023" class="Symbol">(</a><a id="1024" href="StateSizedIO.LIB.DB.Schema.html#1024" class="Bound">tableNr</a> <a id="1032" class="Symbol">:</a> <a id="1034" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1038" class="Symbol">(</a><a id="1039" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1048" href="StateSizedIO.LIB.DB.Schema.html#972" class="Bound">schema</a><a id="1054" class="Symbol">))</a> <a id="1057" class="Symbol">→</a> <a id="1059" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a>
<a id="1061" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="1071" href="StateSizedIO.LIB.DB.Schema.html#1071" class="Bound">schema</a> <a id="1078" href="StateSizedIO.LIB.DB.Schema.html#1078" class="Bound">tableNr</a> <a id="1086" class="Symbol">=</a> <a id="1088" href="Data.List.Base.html#3242" class="Function">length</a> <a id="1095" class="Symbol">(</a><a id="1096" href="Data.Product.html#573" class="Field">proj₂</a> <a id="1102" class="Symbol">(</a><a id="1103" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1107" href="StateSizedIO.LIB.DB.Schema.html#1071" class="Bound">schema</a> <a id="1114" href="StateSizedIO.LIB.DB.Schema.html#1078" class="Bound">tableNr</a><a id="1121" class="Symbol">))</a>

<a id="colName"></a><a id="1125" href="StateSizedIO.LIB.DB.Schema.html#1125" class="Function">colName</a> <a id="1133" class="Symbol">:</a> <a id="1135" class="Symbol">(</a><a id="1136" href="StateSizedIO.LIB.DB.Schema.html#1136" class="Bound">schema</a>  <a id="1144" class="Symbol">:</a> <a id="1146" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="1152" class="Symbol">)</a>
          <a id="1164" class="Symbol">(</a><a id="1165" href="StateSizedIO.LIB.DB.Schema.html#1165" class="Bound">tableNr</a> <a id="1173" class="Symbol">:</a> <a id="1175" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1179" class="Symbol">(</a><a id="1180" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1189" href="StateSizedIO.LIB.DB.Schema.html#1136" class="Bound">schema</a><a id="1195" class="Symbol">))</a>
          <a id="1208" class="Symbol">(</a><a id="1209" href="StateSizedIO.LIB.DB.Schema.html#1209" class="Bound">colNr</a>   <a id="1217" class="Symbol">:</a> <a id="1219" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1223" class="Symbol">(</a><a id="1224" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="1234" href="StateSizedIO.LIB.DB.Schema.html#1136" class="Bound">schema</a> <a id="1241" href="StateSizedIO.LIB.DB.Schema.html#1165" class="Bound">tableNr</a><a id="1248" class="Symbol">))</a>
          <a id="1261" class="Symbol">→</a> <a id="1263" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="1270" href="StateSizedIO.LIB.DB.Schema.html#1125" class="Function">colName</a> <a id="1278" href="StateSizedIO.LIB.DB.Schema.html#1278" class="Bound">schema</a> <a id="1285" href="StateSizedIO.LIB.DB.Schema.html#1285" class="Bound">tableNr</a> <a id="1293" href="StateSizedIO.LIB.DB.Schema.html#1293" class="Bound">colNr</a> <a id="1299" class="Symbol">=</a> <a id="1301" href="Data.Product.html#559" class="Field">proj₁</a> <a id="1307" class="Symbol">(</a><a id="1308" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1312" class="Symbol">(</a><a id="1313" href="Data.Product.html#573" class="Field">proj₂</a> <a id="1319" class="Symbol">(</a><a id="1320" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1324" href="StateSizedIO.LIB.DB.Schema.html#1278" class="Bound">schema</a> <a id="1331" href="StateSizedIO.LIB.DB.Schema.html#1285" class="Bound">tableNr</a><a id="1338" class="Symbol">))</a> <a id="1341" href="StateSizedIO.LIB.DB.Schema.html#1293" class="Bound">colNr</a><a id="1346" class="Symbol">)</a>

<a id="colType"></a><a id="1349" href="StateSizedIO.LIB.DB.Schema.html#1349" class="Function">colType</a> <a id="1357" class="Symbol">:</a> <a id="1359" class="Symbol">(</a><a id="1360" href="StateSizedIO.LIB.DB.Schema.html#1360" class="Bound">schema</a>  <a id="1368" class="Symbol">:</a> <a id="1370" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="1376" class="Symbol">)</a>
          <a id="1388" class="Symbol">(</a><a id="1389" href="StateSizedIO.LIB.DB.Schema.html#1389" class="Bound">tableNr</a> <a id="1397" class="Symbol">:</a> <a id="1399" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1403" class="Symbol">(</a><a id="1404" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1413" href="StateSizedIO.LIB.DB.Schema.html#1360" class="Bound">schema</a><a id="1419" class="Symbol">))</a>
          <a id="1432" class="Symbol">(</a><a id="1433" href="StateSizedIO.LIB.DB.Schema.html#1433" class="Bound">colNr</a>   <a id="1441" class="Symbol">:</a> <a id="1443" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1447" class="Symbol">(</a><a id="1448" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="1458" href="StateSizedIO.LIB.DB.Schema.html#1360" class="Bound">schema</a> <a id="1465" href="StateSizedIO.LIB.DB.Schema.html#1389" class="Bound">tableNr</a><a id="1472" class="Symbol">))</a>
          <a id="1485" class="Symbol">→</a> <a id="1487" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a>
<a id="1497" href="StateSizedIO.LIB.DB.Schema.html#1349" class="Function">colType</a> <a id="1505" href="StateSizedIO.LIB.DB.Schema.html#1505" class="Bound">schema</a> <a id="1512" href="StateSizedIO.LIB.DB.Schema.html#1512" class="Bound">tableNr</a> <a id="1520" href="StateSizedIO.LIB.DB.Schema.html#1520" class="Bound">colNr</a> <a id="1526" class="Symbol">=</a> <a id="1528" href="Data.Product.html#559" class="Field">proj₁</a> <a id="1534" class="Symbol">(</a><a id="1535" href="Data.Product.html#573" class="Field">proj₂</a> <a id="1541" class="Symbol">(</a><a id="1542" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1546" class="Symbol">(</a><a id="1547" href="Data.Product.html#573" class="Field">proj₂</a> <a id="1553" class="Symbol">(</a><a id="1554" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1558" href="StateSizedIO.LIB.DB.Schema.html#1505" class="Bound">schema</a> <a id="1565" href="StateSizedIO.LIB.DB.Schema.html#1512" class="Bound">tableNr</a><a id="1572" class="Symbol">))</a> <a id="1575" href="StateSizedIO.LIB.DB.Schema.html#1520" class="Bound">colNr</a><a id="1580" class="Symbol">))</a>



<a id="tableName"></a><a id="1586" href="StateSizedIO.LIB.DB.Schema.html#1586" class="Function">tableName</a> <a id="1596" class="Symbol">:</a> <a id="1598" class="Symbol">(</a><a id="1599" href="StateSizedIO.LIB.DB.Schema.html#1599" class="Bound">schema</a>  <a id="1607" class="Symbol">:</a> <a id="1609" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="1615" class="Symbol">)</a>
            <a id="1629" class="Symbol">(</a><a id="1630" href="StateSizedIO.LIB.DB.Schema.html#1630" class="Bound">tableNr</a> <a id="1638" class="Symbol">:</a> <a id="1640" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1644" class="Symbol">(</a><a id="1645" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1654" href="StateSizedIO.LIB.DB.Schema.html#1599" class="Bound">schema</a><a id="1660" class="Symbol">))</a>
            <a id="1675" class="Symbol">→</a> <a id="1677" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="1684" href="StateSizedIO.LIB.DB.Schema.html#1586" class="Function">tableName</a> <a id="1694" href="StateSizedIO.LIB.DB.Schema.html#1694" class="Bound">schema</a> <a id="1701" href="StateSizedIO.LIB.DB.Schema.html#1701" class="Bound">tableNr</a> <a id="1709" class="Symbol">=</a> <a id="1711" href="Data.Product.html#559" class="Field">proj₁</a> <a id="1717" class="Symbol">(</a><a id="1718" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1722" href="StateSizedIO.LIB.DB.Schema.html#1694" class="Bound">schema</a> <a id="1729" href="StateSizedIO.LIB.DB.Schema.html#1701" class="Bound">tableNr</a><a id="1736" class="Symbol">)</a>

<a id="tableType"></a><a id="1739" href="StateSizedIO.LIB.DB.Schema.html#1739" class="Function">tableType</a> <a id="1749" class="Symbol">:</a> <a id="1751" class="Symbol">(</a><a id="1752" href="StateSizedIO.LIB.DB.Schema.html#1752" class="Bound">schema</a>  <a id="1760" class="Symbol">:</a> <a id="1762" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="1768" class="Symbol">)</a>
            <a id="1782" class="Symbol">(</a><a id="1783" href="StateSizedIO.LIB.DB.Schema.html#1783" class="Bound">tableNr</a> <a id="1791" class="Symbol">:</a> <a id="1793" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1797" class="Symbol">(</a><a id="1798" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1807" href="StateSizedIO.LIB.DB.Schema.html#1752" class="Bound">schema</a><a id="1813" class="Symbol">))</a>
            <a id="1828" class="Symbol">→</a> <a id="1830" href="StateSizedIO.LIB.DB.Schema.html#800" class="Function">TableType</a>
<a id="1840" href="StateSizedIO.LIB.DB.Schema.html#1739" class="Function">tableType</a> <a id="1850" href="StateSizedIO.LIB.DB.Schema.html#1850" class="Bound">schema</a> <a id="1857" href="StateSizedIO.LIB.DB.Schema.html#1857" class="Bound">tableNr</a> <a id="1865" class="Symbol">=</a> <a id="1867" href="Data.Product.html#573" class="Field">proj₂</a> <a id="1873" class="Symbol">(</a><a id="1874" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="1878" href="StateSizedIO.LIB.DB.Schema.html#1850" class="Bound">schema</a> <a id="1885" href="StateSizedIO.LIB.DB.Schema.html#1857" class="Bound">tableNr</a><a id="1892" class="Symbol">)</a>

<a id="tableFields"></a><a id="1895" href="StateSizedIO.LIB.DB.Schema.html#1895" class="Function">tableFields</a> <a id="1907" class="Symbol">:</a> <a id="1909" class="Symbol">(</a><a id="1910" href="StateSizedIO.LIB.DB.Schema.html#1910" class="Bound">schema</a>  <a id="1918" class="Symbol">:</a> <a id="1920" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="1926" class="Symbol">)</a>
            <a id="1940" class="Symbol">(</a><a id="1941" href="StateSizedIO.LIB.DB.Schema.html#1941" class="Bound">tableNr</a> <a id="1949" class="Symbol">:</a> <a id="1951" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="1955" class="Symbol">(</a><a id="1956" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="1965" href="StateSizedIO.LIB.DB.Schema.html#1910" class="Bound">schema</a><a id="1971" class="Symbol">))</a>
            <a id="1986" class="Symbol">→</a> <a id="1988" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="1993" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a>
<a id="2003" href="StateSizedIO.LIB.DB.Schema.html#1895" class="Function">tableFields</a> <a id="2015" href="StateSizedIO.LIB.DB.Schema.html#2015" class="Bound">schema</a> <a id="2022" href="StateSizedIO.LIB.DB.Schema.html#2022" class="Bound">tableNr</a> <a id="2030" class="Symbol">=</a> <a id="2032" href="Data.List.Base.html#1057" class="Function">map</a> <a id="2036" class="Symbol">(λ</a> <a id="2039" href="StateSizedIO.LIB.DB.Schema.html#2039" class="Bound">x</a> <a id="2041" class="Symbol">→</a> <a id="2043" href="Data.Product.html#559" class="Field">proj₁</a> <a id="2049" class="Symbol">(</a><a id="2050" href="Data.Product.html#573" class="Field">proj₂</a> <a id="2056" href="StateSizedIO.LIB.DB.Schema.html#2039" class="Bound">x</a><a id="2057" class="Symbol">))</a> <a id="2060" class="Symbol">(</a><a id="2061" href="Data.Product.html#573" class="Field">proj₂</a> <a id="2067" class="Symbol">(</a><a id="2068" href="StateSizedIO.LIB.library.html#1397" class="Function">nth</a> <a id="2072" href="StateSizedIO.LIB.DB.Schema.html#2015" class="Bound">schema</a> <a id="2079" href="StateSizedIO.LIB.DB.Schema.html#2022" class="Bound">tableNr</a><a id="2086" class="Symbol">))</a>




<a id="ForeignKeys"></a><a id="2093" href="StateSizedIO.LIB.DB.Schema.html#2093" class="Function">ForeignKeys</a> <a id="2105" class="Symbol">:</a> <a id="2107" class="Symbol">(</a><a id="2108" href="StateSizedIO.LIB.DB.Schema.html#2108" class="Bound">schema</a> <a id="2115" class="Symbol">:</a> <a id="2117" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="2123" class="Symbol">)</a>
              <a id="2139" class="Symbol">(</a><a id="2140" class="Keyword">let</a> <a id="2144" href="StateSizedIO.LIB.DB.Schema.html#2144" class="Bound">nrtables</a> <a id="2153" class="Symbol">=</a> <a id="2155" class="Symbol">(</a><a id="2156" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="2165" href="StateSizedIO.LIB.DB.Schema.html#2108" class="Bound">schema</a><a id="2171" class="Symbol">))</a>
              <a id="2188" class="Symbol">(</a><a id="2189" class="Keyword">let</a> <a id="2193" href="StateSizedIO.LIB.DB.Schema.html#2193" class="Bound">nrcolumns</a> <a id="2203" class="Symbol">=</a> <a id="2205" class="Symbol">(</a><a id="2206" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="2216" href="StateSizedIO.LIB.DB.Schema.html#2108" class="Bound">schema</a><a id="2222" class="Symbol">))</a>

              <a id="2240" class="Symbol">(</a><a id="2241" href="StateSizedIO.LIB.DB.Schema.html#2241" class="Bound">mytable</a> <a id="2249" class="Symbol">:</a> <a id="2251" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="2255" href="StateSizedIO.LIB.DB.Schema.html#2144" class="Bound">nrtables</a><a id="2263" class="Symbol">)</a>
             <a id="2278" class="Symbol">→</a> <a id="2280" class="PrimitiveType">Set</a>
<a id="2284" href="StateSizedIO.LIB.DB.Schema.html#2093" class="Function">ForeignKeys</a> <a id="2296" href="StateSizedIO.LIB.DB.Schema.html#2296" class="Bound">schema</a> <a id="2303" href="StateSizedIO.LIB.DB.Schema.html#2303" class="Bound">mytable</a> <a id="2311" class="Symbol">=</a>
  <a id="2315" class="Keyword">let</a> <a id="2319" href="StateSizedIO.LIB.DB.Schema.html#2319" class="Bound">nrtables</a> <a id="2328" class="Symbol">=</a> <a id="2330" class="Symbol">(</a><a id="2331" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="2340" href="StateSizedIO.LIB.DB.Schema.html#2296" class="Bound">schema</a><a id="2346" class="Symbol">)</a>
      <a id="2354" href="StateSizedIO.LIB.DB.Schema.html#2354" class="Bound">nrcolumns</a> <a id="2364" class="Symbol">=</a> <a id="2366" class="Symbol">(</a><a id="2367" href="StateSizedIO.LIB.DB.Schema.html#959" class="Function">nrColumns</a> <a id="2377" href="StateSizedIO.LIB.DB.Schema.html#2296" class="Bound">schema</a><a id="2383" class="Symbol">)</a>
      <a id="2391" href="StateSizedIO.LIB.DB.Schema.html#2391" class="Bound">columnType</a> <a id="2402" class="Symbol">=</a> <a id="2404" href="StateSizedIO.LIB.DB.Schema.html#1349" class="Function">colType</a> <a id="2412" href="StateSizedIO.LIB.DB.Schema.html#2296" class="Bound">schema</a>
  <a id="2421" class="Keyword">in</a> <a id="2424" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="2429" class="Symbol">(</a><a id="2430" href="Data.Product.html#740" class="Function">Σ[</a> <a id="2433" href="StateSizedIO.LIB.DB.Schema.html#2433" class="Bound">mycol</a> <a id="2439" href="Data.Product.html#740" class="Function">∈</a> <a id="2441" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="2445" class="Symbol">(</a><a id="2446" href="StateSizedIO.LIB.DB.Schema.html#2354" class="Bound">nrcolumns</a> <a id="2456" href="StateSizedIO.LIB.DB.Schema.html#2303" class="Bound">mytable</a><a id="2463" class="Symbol">)</a> <a id="2465" href="Data.Product.html#740" class="Function">]</a> <a id="2467" class="Symbol">(</a>
                    <a id="2489" class="Symbol">(</a><a id="2490" href="Data.Product.html#740" class="Function">Σ[</a> <a id="2493" href="StateSizedIO.LIB.DB.Schema.html#2493" class="Bound">k</a> <a id="2495" href="Data.Product.html#740" class="Function">∈</a> <a id="2497" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="2501" href="StateSizedIO.LIB.DB.Schema.html#2319" class="Bound">nrtables</a> <a id="2510" href="Data.Product.html#740" class="Function">]</a> <a id="2512" class="Symbol">(</a>
                         <a id="2539" href="Data.Product.html#740" class="Function">Σ[</a> <a id="2542" href="StateSizedIO.LIB.DB.Schema.html#2542" class="Bound">j</a> <a id="2544" href="Data.Product.html#740" class="Function">∈</a> <a id="2546" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="2550" class="Symbol">(</a><a id="2551" href="StateSizedIO.LIB.DB.Schema.html#2354" class="Bound">nrcolumns</a> <a id="2561" href="StateSizedIO.LIB.DB.Schema.html#2493" class="Bound">k</a><a id="2562" class="Symbol">)</a> <a id="2564" href="Data.Product.html#740" class="Function">]</a> <a id="2566" class="Symbol">(</a><a id="2567" href="Data.Bool.Base.html#791" class="Function">T</a>

                             <a id="2599" class="Symbol">(</a><a id="2600" href="StateSizedIO.LIB.DB.Schema.html#2391" class="Bound">columnType</a> <a id="2611" href="StateSizedIO.LIB.DB.Schema.html#2303" class="Bound">mytable</a> <a id="2619" href="StateSizedIO.LIB.DB.Schema.html#2433" class="Bound">mycol</a> <a id="2625" href="StateSizedIO.LIB.DB.Schema.html#531" class="Function Operator">==Type</a> <a id="2632" href="StateSizedIO.LIB.DB.Schema.html#2391" class="Bound">columnType</a> <a id="2643" href="StateSizedIO.LIB.DB.Schema.html#2493" class="Bound">k</a> <a id="2645" href="StateSizedIO.LIB.DB.Schema.html#2542" class="Bound">j</a><a id="2646" class="Symbol">))))))</a>


<a id="SchemaWithForeignKeys"></a><a id="2655" href="StateSizedIO.LIB.DB.Schema.html#2655" class="Function">SchemaWithForeignKeys</a> <a id="2677" class="Symbol">:</a> <a id="2679" class="PrimitiveType">Set</a>
<a id="2683" href="StateSizedIO.LIB.DB.Schema.html#2655" class="Function">SchemaWithForeignKeys</a> <a id="2705" class="Symbol">=</a> <a id="2707" class="Symbol">(</a><a id="2708" href="Data.Product.html#740" class="Function">Σ[</a> <a id="2711" href="StateSizedIO.LIB.DB.Schema.html#2711" class="Bound">schema</a> <a id="2718" href="Data.Product.html#740" class="Function">∈</a> <a id="2720" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a> <a id="2727" href="Data.Product.html#740" class="Function">]</a>
                          <a id="2755" href="Agda.Builtin.List.html#80" class="Datatype">List</a>
                           <a id="2787" class="Symbol">(</a><a id="2788" href="Data.Product.html#740" class="Function">Σ[</a> <a id="2791" href="StateSizedIO.LIB.DB.Schema.html#2791" class="Bound">mytable</a> <a id="2799" href="Data.Product.html#740" class="Function">∈</a> <a id="2801" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="2805" class="Symbol">(</a><a id="2806" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="2815" href="StateSizedIO.LIB.DB.Schema.html#2711" class="Bound">schema</a><a id="2821" class="Symbol">)</a><a id="2822" href="Data.Product.html#740" class="Function">]</a> <a id="2824" href="StateSizedIO.LIB.DB.Schema.html#2093" class="Function">ForeignKeys</a> <a id="2836" href="StateSizedIO.LIB.DB.Schema.html#2711" class="Bound">schema</a> <a id="2843" href="StateSizedIO.LIB.DB.Schema.html#2791" class="Bound">mytable</a><a id="2850" class="Symbol">))</a>



<a id="2856" class="Comment">-- Row definition</a>
<a id="2874" class="Comment">--</a>
<a id="Field"></a><a id="2877" href="StateSizedIO.LIB.DB.Schema.html#2877" class="Function">Field</a> <a id="2883" class="Symbol">:</a> <a id="2885" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="2895" class="Symbol">→</a> <a id="2897" class="PrimitiveType">Set</a>
<a id="2901" href="StateSizedIO.LIB.DB.Schema.html#2877" class="Function">Field</a> <a id="2907" href="StateSizedIO.LIB.DB.Schema.html#487" class="InductiveConstructor">string</a> <a id="2914" class="Symbol">=</a> <a id="2916" href="Agda.Builtin.String.html#165" class="Postulate">String</a>
<a id="2923" href="StateSizedIO.LIB.DB.Schema.html#2877" class="Function">Field</a> <a id="2929" href="StateSizedIO.LIB.DB.Schema.html#509" class="InductiveConstructor">integer</a> <a id="2937" class="Symbol">=</a> <a id="2939" href="Agda.Builtin.Int.html#178" class="Datatype">ℤ</a>


<a id="Row"></a><a id="2943" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="2947" class="Symbol">:</a> <a id="2949" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="2954" href="StateSizedIO.LIB.DB.Schema.html#463" class="Datatype">FieldType</a> <a id="2964" class="Symbol">→</a> <a id="2966" class="PrimitiveType">Set</a>
<a id="2970" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="2974" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="2977" class="Symbol">=</a> <a id="2979" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="2981" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="2985" class="Symbol">(</a><a id="2986" href="StateSizedIO.LIB.DB.Schema.html#2986" class="Bound">l</a> <a id="2988" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="2990" href="StateSizedIO.LIB.DB.Schema.html#2990" class="Bound">t</a><a id="2991" class="Symbol">)</a> <a id="2993" class="Symbol">=</a> <a id="2995" href="StateSizedIO.LIB.DB.Schema.html#2877" class="Function">Field</a> <a id="3001" href="StateSizedIO.LIB.DB.Schema.html#2986" class="Bound">l</a> <a id="3003" href="Data.Product.html#1329" class="Function Operator">×</a> <a id="3005" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="3009" href="StateSizedIO.LIB.DB.Schema.html#2990" class="Bound">t</a>

<a id="3012" class="Comment">{-

exampleFunction : (l : List FieldType) → (r : Row l) →  ℕ
exampleFunction [] r = {!!}
exampleFunction (x ∷ l) (proj₃ , proj₄) = {!!}

-}</a>


<a id="tableRowType"></a><a id="3155" href="StateSizedIO.LIB.DB.Schema.html#3155" class="Function">tableRowType</a> <a id="3168" class="Symbol">:</a> <a id="3170" class="Symbol">(</a><a id="3171" href="StateSizedIO.LIB.DB.Schema.html#3171" class="Bound">schema</a>  <a id="3179" class="Symbol">:</a> <a id="3181" href="StateSizedIO.LIB.DB.Schema.html#827" class="Function">Schema</a><a id="3187" class="Symbol">)</a>
            <a id="3201" class="Symbol">(</a><a id="3202" href="StateSizedIO.LIB.DB.Schema.html#3202" class="Bound">tableNr</a> <a id="3210" class="Symbol">:</a> <a id="3212" href="Data.Fin.html#910" class="Datatype">Fin</a> <a id="3216" class="Symbol">(</a><a id="3217" href="StateSizedIO.LIB.DB.Schema.html#885" class="Function">nrTables</a> <a id="3226" href="StateSizedIO.LIB.DB.Schema.html#3171" class="Bound">schema</a><a id="3232" class="Symbol">))</a>
            <a id="3247" class="Symbol">→</a> <a id="3249" class="PrimitiveType">Set</a>
<a id="3253" href="StateSizedIO.LIB.DB.Schema.html#3155" class="Function">tableRowType</a> <a id="3266" href="StateSizedIO.LIB.DB.Schema.html#3266" class="Bound">schema</a> <a id="3273" href="StateSizedIO.LIB.DB.Schema.html#3273" class="Bound">tableNr</a> <a id="3281" class="Symbol">=</a> <a id="3283" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="3287" class="Symbol">(</a><a id="3288" href="StateSizedIO.LIB.DB.Schema.html#1895" class="Function">tableFields</a> <a id="3300" href="StateSizedIO.LIB.DB.Schema.html#3266" class="Bound">schema</a> <a id="3307" href="StateSizedIO.LIB.DB.Schema.html#3273" class="Bound">tableNr</a><a id="3314" class="Symbol">)</a>


<a id="row2SqlVal"></a><a id="3318" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3329" class="Symbol">:</a> <a id="3331" class="Symbol">∀</a> <a id="3333" class="Symbol">{</a><a id="3334" href="StateSizedIO.LIB.DB.Schema.html#3334" class="Bound">fields</a><a id="3340" class="Symbol">}</a> <a id="3342" class="Symbol">→</a> <a id="3344" href="StateSizedIO.LIB.DB.Schema.html#2943" class="Function">Row</a> <a id="3348" href="StateSizedIO.LIB.DB.Schema.html#3334" class="Bound">fields</a> <a id="3355" class="Symbol">→</a> <a id="3357" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="3362" href="StateSizedIO.LIB.HDBC.HDBC.html#2268" class="Datatype">SqlVal</a>
<a id="3369" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3380" class="Symbol">{</a><a id="3381" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a><a id="3383" class="Symbol">}</a> <a id="3385" href="Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a> <a id="3388" class="Symbol">=</a> <a id="3390" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a>
<a id="3393" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3404" class="Symbol">{</a><a id="3405" href="StateSizedIO.LIB.DB.Schema.html#487" class="InductiveConstructor">string</a> <a id="3412" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="3414" href="StateSizedIO.LIB.DB.Schema.html#3414" class="Bound">fields</a><a id="3420" class="Symbol">}</a> <a id="3422" class="Symbol">(</a><a id="3423" href="StateSizedIO.LIB.DB.Schema.html#3423" class="Bound">str</a> <a id="3427" href="Data.Product.html#543" class="InductiveConstructor Operator">,</a> <a id="3429" href="StateSizedIO.LIB.DB.Schema.html#3429" class="Bound">xs</a><a id="3431" class="Symbol">)</a> <a id="3433" class="Symbol">=</a> <a id="3435" href="StateSizedIO.LIB.HDBC.HDBC.html#2289" class="InductiveConstructor">sqlString</a> <a id="3445" href="StateSizedIO.LIB.DB.Schema.html#3423" class="Bound">str</a> <a id="3449" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="3451" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3462" href="StateSizedIO.LIB.DB.Schema.html#3429" class="Bound">xs</a>
<a id="3465" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3476" class="Symbol">{</a><a id="3477" href="StateSizedIO.LIB.DB.Schema.html#509" class="InductiveConstructor">integer</a> <a id="3485" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="3487" href="StateSizedIO.LIB.DB.Schema.html#3487" class="Bound">fields</a><a id="3493" class="Symbol">}</a> <a id="3495" class="Symbol">(</a><a id="3496" href="StateSizedIO.LIB.DB.Schema.html#3496" class="Bound">int</a> <a id="3500" href="Data.Product.html#543" class="InductiveConstructor Operator">,</a> <a id="3502" href="StateSizedIO.LIB.DB.Schema.html#3502" class="Bound">xs</a><a id="3504" class="Symbol">)</a> <a id="3506" class="Symbol">=</a> <a id="3508" href="StateSizedIO.LIB.HDBC.HDBC.html#2322" class="InductiveConstructor">sqlInteger</a> <a id="3519" href="StateSizedIO.LIB.DB.Schema.html#3496" class="Bound">int</a> <a id="3523" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="3525" href="StateSizedIO.LIB.DB.Schema.html#3318" class="Function">row2SqlVal</a> <a id="3536" href="StateSizedIO.LIB.DB.Schema.html#3502" class="Bound">xs</a>


<a id="3541" class="Comment">--</a>
<a id="3544" class="Comment">-- Type Aliases</a>
<a id="3560" class="Comment">--</a>
<a id="notNull"></a><a id="3563" href="StateSizedIO.LIB.DB.Schema.html#3563" class="Function">notNull</a> <a id="3571" class="Symbol">:</a> <a id="3573" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="3578" href="StateSizedIO.LIB.DB.Schema.html#3563" class="Function">notNull</a> <a id="3586" class="Symbol">=</a> <a id="3588" href="Agda.Builtin.Bool.html#86" class="InductiveConstructor">false</a>

<a id="isPrimKey"></a><a id="3595" href="StateSizedIO.LIB.DB.Schema.html#3595" class="Function">isPrimKey</a> <a id="3605" class="Symbol">:</a> <a id="3607" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="3612" href="StateSizedIO.LIB.DB.Schema.html#3595" class="Function">isPrimKey</a> <a id="3622" class="Symbol">=</a> <a id="3624" href="Agda.Builtin.Bool.html#92" class="InductiveConstructor">true</a>

<a id="notPrimKey"></a><a id="3630" href="StateSizedIO.LIB.DB.Schema.html#3630" class="Function">notPrimKey</a> <a id="3641" class="Symbol">:</a> <a id="3643" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="3648" href="StateSizedIO.LIB.DB.Schema.html#3630" class="Function">notPrimKey</a> <a id="3659" class="Symbol">=</a> <a id="3661" href="Agda.Builtin.Bool.html#86" class="InductiveConstructor">false</a>
</pre></body></html>