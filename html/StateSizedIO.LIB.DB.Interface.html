<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>StateSizedIO.LIB.DB.Interface</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">



<a id="5" class="Keyword">module</a> <a id="12" href="StateSizedIO.LIB.DB.Interface.html" class="Module">StateSizedIO.LIB.DB.Interface</a> <a id="42" class="Keyword">where</a>

<a id="49" class="Keyword">open</a> <a id="54" class="Keyword">import</a> <a id="61" href="Data.String.Base.html" class="Module">Data.String.Base</a>  <a id="79" class="Keyword">hiding</a> <a id="86" class="Symbol">(</a><a id="87" href="Data.String.Base.html#1561" class="Primitive">show</a><a id="91" class="Symbol">)</a>
<a id="93" class="Keyword">open</a> <a id="98" class="Keyword">import</a> <a id="105" href="Data.List.html" class="Module">Data.List</a> <a id="115" class="Keyword">renaming</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.List.Base.html#1810" class="Function Operator">_++_</a> <a id="130" class="Symbol">to</a> <a id="133" class="Function Operator">_++List_</a><a id="141" class="Symbol">)</a>
<a id="143" class="Keyword">open</a> <a id="148" class="Keyword">import</a> <a id="155" href="Data.List.Categorical.html" class="Module">Data.List.Categorical</a>
<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="198" class="Keyword">open</a> <a id="203" class="Keyword">import</a> <a id="210" href="Data.Nat.Show.html" class="Module">Data.Nat.Show</a>
<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Data.Fin.html" class="Module">Data.Fin</a>

<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="StateSizedIO.LIB.HDBC.HDBC.html" class="Module">StateSizedIO.LIB.HDBC.HDBC</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="StateSizedIO.LIB.DB.Schema.html" class="Module">StateSizedIO.LIB.DB.Schema</a>

<a id="325" class="Keyword">open</a> <a id="330" class="Keyword">import</a> <a id="337" href="StateSizedIO.LIB.DB.Serialization.html" class="Module">StateSizedIO.LIB.DB.Serialization</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Data.List.Categorical.html" class="Module">Data.List.Categorical</a>

<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="StateSizedIO.LIB.library.html" class="Module">StateSizedIO.LIB.library</a>

<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="NativeIO.html" class="Module">NativeIO</a> <a id="465" class="Keyword">renaming</a> <a id="474" class="Symbol">(</a><a id="475" href="NativeIO.html#260" class="Postulate">NativeIO</a> <a id="484" class="Symbol">to</a> <a id="487" class="Postulate">IO</a><a id="489" class="Symbol">;</a> <a id="491" href="NativeIO.html#287" class="Postulate">nativeReturn</a> <a id="504" class="Symbol">to</a> <a id="507" class="Postulate">return</a><a id="513" class="Symbol">;</a> <a id="515" href="NativeIO.html#331" class="Postulate Operator">_native&gt;&gt;=_</a> <a id="527" class="Symbol">to</a> <a id="530" class="Postulate Operator">_&gt;&gt;=_</a><a id="535" class="Symbol">)</a>


<a id="insertRows"></a><a id="539" href="StateSizedIO.LIB.DB.Interface.html#539" class="Function">insertRows</a> <a id="550" class="Symbol">:</a> <a id="552" href="StateSizedIO.LIB.HDBC.HDBC.html#3446" class="Postulate">Connection</a> <a id="563" class="Symbol">→</a>
             <a id="578" class="Symbol">(</a><a id="579" href="StateSizedIO.LIB.DB.Interface.html#579" class="Bound">schema</a> <a id="586" class="Symbol">:</a> <a id="588" href="StateSizedIO.LIB.DB.Schema.html#834" class="Function">Schema</a><a id="594" class="Symbol">)</a> <a id="596" class="Symbol">→</a>
             <a id="611" class="Symbol">(</a><a id="612" href="StateSizedIO.LIB.DB.Interface.html#612" class="Bound">table</a> <a id="618" class="Symbol">:</a> <a id="620" href="Data.Fin.Base.html#1214" class="Datatype">Fin</a> <a id="624" class="Symbol">(</a><a id="625" href="StateSizedIO.LIB.DB.Schema.html#892" class="Function">nrTables</a> <a id="634" href="StateSizedIO.LIB.DB.Interface.html#579" class="Bound">schema</a><a id="640" class="Symbol">))</a> <a id="643" class="Symbol">→</a>
             <a id="658" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="663" class="Symbol">(</a><a id="664" href="StateSizedIO.LIB.DB.Schema.html#2950" class="Function">Row</a> <a id="668" class="Symbol">(</a><a id="669" href="StateSizedIO.LIB.DB.Schema.html#1902" class="Function">tableFields</a> <a id="681" href="StateSizedIO.LIB.DB.Interface.html#579" class="Bound">schema</a> <a id="688" href="StateSizedIO.LIB.DB.Interface.html#612" class="Bound">table</a><a id="693" class="Symbol">))</a> <a id="696" class="Symbol">→</a>
             <a id="711" href="StateSizedIO.LIB.DB.Interface.html#487" class="Postulate">IO</a> <a id="714" href="Unit.html#28" class="Record">Unit</a>

<a id="720" href="StateSizedIO.LIB.DB.Interface.html#539" class="Function">insertRows</a> <a id="731" href="StateSizedIO.LIB.DB.Interface.html#731" class="Bound">conn</a> <a id="736" href="StateSizedIO.LIB.DB.Interface.html#736" class="Bound">schema</a> <a id="743" href="StateSizedIO.LIB.DB.Interface.html#743" class="Bound">table</a> <a id="749" href="StateSizedIO.LIB.DB.Interface.html#749" class="Bound">xs</a> <a id="752" class="Symbol">=</a>
  <a id="756" href="StateSizedIO.LIB.HDBC.HDBC.html#5045" class="Postulate">nativePrepare</a> <a id="770" href="StateSizedIO.LIB.DB.Interface.html#731" class="Bound">conn</a> <a id="775" class="Symbol">(</a><a id="776" href="StateSizedIO.LIB.DB.Serialization.html#546" class="Function">insertCommand</a> <a id="790" href="StateSizedIO.LIB.DB.Interface.html#736" class="Bound">schema</a> <a id="797" href="StateSizedIO.LIB.DB.Interface.html#743" class="Bound">table</a><a id="802" class="Symbol">)</a> <a id="804" href="StateSizedIO.LIB.DB.Interface.html#530" class="Postulate Operator">&gt;&gt;=</a> <a id="808" class="Symbol">λ</a> <a id="810" href="StateSizedIO.LIB.DB.Interface.html#810" class="Bound">statement</a> <a id="820" class="Symbol">→</a>

  <a id="825" href="Data.List.Categorical.html#2312" class="Function">Data.List.Categorical.TraversableM.mapM</a> <a id="865" href="StateSizedIO.LIB.library.html#1619" class="Function">ioMonad</a> <a id="873" class="Symbol">(λ</a> <a id="876" href="StateSizedIO.LIB.DB.Interface.html#876" class="Bound">x</a> <a id="878" class="Symbol">→</a> <a id="880" href="StateSizedIO.LIB.HDBC.HDBC.html#5334" class="Function">nativeExecute</a> <a id="894" href="StateSizedIO.LIB.DB.Interface.html#810" class="Bound">statement</a> <a id="904" class="Symbol">(</a><a id="905" href="StateSizedIO.LIB.DB.Schema.html#3325" class="Function">row2SqlVal</a> <a id="916" href="StateSizedIO.LIB.DB.Interface.html#876" class="Bound">x</a><a id="917" class="Symbol">))</a> <a id="920" href="StateSizedIO.LIB.DB.Interface.html#749" class="Bound">xs</a> <a id="923" href="StateSizedIO.LIB.DB.Interface.html#530" class="Postulate Operator">&gt;&gt;=</a> <a id="927" class="Symbol">λ</a> <a id="929" href="StateSizedIO.LIB.DB.Interface.html#929" class="Bound">x</a> <a id="931" class="Symbol">→</a>
  <a id="935" href="StateSizedIO.LIB.HDBC.HDBC.html#4444" class="Postulate">nativeCommit</a> <a id="948" href="StateSizedIO.LIB.DB.Interface.html#731" class="Bound">conn</a> <a id="953" href="StateSizedIO.LIB.DB.Interface.html#530" class="Postulate Operator">&gt;&gt;=</a> <a id="957" class="Symbol">λ</a> <a id="959" href="StateSizedIO.LIB.DB.Interface.html#959" class="Bound">_</a> <a id="961" class="Symbol">→</a>
  <a id="965" href="StateSizedIO.LIB.DB.Interface.html#507" class="Postulate">return</a> <a id="972" class="Symbol">_</a>
</pre></body></html>